{% extends "mainpage/base.html" %}
{% load static %}
{% load static tailwind_tags %}

{% block title %}
    Profile
{% endblock %}
{% tailwind_css %}

{% block content %}
    <style>
        .raleway {
            font-family: "Raleway", sans-serif;
            font-optical-sizing: auto;
            font-weight: 500;
            font-style: normal;
        }
    </style>
</head>
<body class="raleway">
    <div class="flex flex-row min-h-screen bg-gradient-to-br from-[#d3a044]/[0.5] to-[#d3a040]">
        <!-- Sidebar -->
        <div class="w-2/12 min-h-full bg-gradient-to-b from-[#6d171f]/[0.69] to-[#6d171f] p-5">
            <h1 class="text-3xl font-bold text-center text-white mb-10">User Profile</h1>
            <nav class="flex flex-col gap-4">
                <a href="#" class="text-lg text-white border-2 border-white border-opacity-25 rounded-lg py-2 px-4 hover:bg-white hover:bg-opacity-25 hover:border-opacity-100">Dashboard</a>
                <a href="edit-profile.html" class="text-lg text-white border-2 border-white border-opacity-25 rounded-lg py-2 px-4 hover:bg-white hover:bg-opacity-25 hover:border-opacity-100">Edit Profile</a>
                <a href="#" class="text-lg text-white border-2 border-white border-opacity-25 rounded-lg py-2 px-4 hover:bg-white hover:bg-opacity-25 hover:border-opacity-100">Logout</a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-grow p-10 mb-4">
            <div class="bg-gradient-to-b from-[#1f2139]/[0.9] to-[#1f2139] text-white p-8 rounded-lg shadow-lg">
                <h2 class="text-2xl font-bold mb-6">User Details</h2>
                <div class="grid grid-cols-2 gap-6 mb-8">
                    <div>
                        <p class="font-semibold">Name:</p>
                        <p>Meutick</p>
                    </div>
                    <div>
                        <p class="font-semibold">Email:</p>
                        <p>meutick_not_found@gmail.com</p>
                    </div>
                    <div>
                        <p class="font-semibold">Phone:</p>
                        <p>+123 456 7890</p>
                    </div>
                    <div>
                        <p class="font-semibold">Address:</p>
                        <p>123 Street Name, City, Country</p>
                    </div>
                </div>

                <h2 class="text-2xl font-bold mb-6">Transaction History</h2>
                <table class="w-full bg-gradient-to-b from-[#6d171f]/[0.69] to-[#6d171f] rounded-lg overflow-hidden mb-8">
                    <thead class="bg-[#6d171f]/[0.9] text-white">
                        <tr>
                            <th class="p-3">Transaction ID</th>
                            <th class="p-3">Museum Name</th>
                            <th class="p-3">Date</th>
                            <th class="p-3">Amount</th>
                            <th class="p-3">Status</th>
                            <th class="p-3">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="text-white">
                        <tr class="bg-[#6d171f]/[0.69] hover:bg-[#6d171f]/[0.8]">
                            <td class="p-3 text-center">TXN123456</td>
                            <td class="p-3 text-center">The Louvre</td>
                            <td class="p-3 text-center">2024-09-01</td>
                            <td class="p-3 text-center">$100</td>
                            <td class="p-3 text-center">Completed</td>
                            <td class="p-3 text-center">
                                <button onclick="downloadReceipt('TXN123456')" class="bg-white bg-opacity-25 text-slate-900 px-2 py-1 rounded-lg hover:bg-opacity-50 text-sm">Download Receipt</button>
                            </td>
                        </tr>
                        <!-- Add more rows as needed -->
                    </tbody>
                </table>

                <!-- Additional Sections -->
                <h2 class="text-2xl font-bold mb-6">Upcoming Visits</h2>
                <ul class="list-disc pl-5 mb-8 text-white">
                    <li>Visit to The Louvre on 2024-09-01</li>
                    <li>Tour of The British Museum on 2024-10-02</li>
                </ul>

                <h2 class="text-2xl font-bold mb-6">Favorite Museums</h2>
                <ul class="list-disc pl-5 mb-8 text-white">
                    <li>
                        The Louvre
                        <button onclick="toggleFavorite('The Louvre')" id="favorite-TheLouvre" class="ml-2 bg-white bg-opacity-25 text-slate-900 px-2 py-1 rounded-lg hover:bg-opacity-50 text-sm">
                            Add to Favorites
                        </button>
                    </li>
                    &nbsp;
                    <li>
                        The British Museum
                        <button onclick="toggleFavorite('The British Museum')" id="favorite-BritishMuseum" class="ml-2 bg-white bg-opacity-25 text-slate-900 px-2 py-1 rounded-lg hover:bg-opacity-50 text-sm">
                            Add to Favorites
                        </button>
                    </li>
                    &nbsp;
                    <li>
                        The Metropolitan Museum of Art
                        <button onclick="toggleFavorite('The Metropolitan Museum of Art')" id="favorite-MetropolitanMuseum" class="ml-2 bg-white bg-opacity-25 text-slate-900 px-2 py-1 rounded-lg hover:bg-opacity-50 text-sm">
                            Add to Favorites
                        </button>
                    </li>
                </ul>

                <h2 class="text-2xl font-bold mb-6">Recent Feedback</h2>
                <div id="feedback-list" class="bg-[#1f2139] p-4 rounded-lg text-white mb-8">
                    <p><strong>Feedback for The Louvre:</strong> Great experience! The tour was very informative.</p>
                    <p><strong>Feedback for The British Museum:</strong> The exhibits were fascinating, but the queue was too long.</p>
                </div>

                <!-- Feedback Form -->
                <h2 class="text-2xl font-bold mb-6">Write Feedback</h2>
                <form id="feedback-form" class="bg-[#1f2139] p-6 rounded-lg shadow-lg">
                    <div class="mb-4">
                        <label for="museum" class="block text-white text-lg mb-2">Museum:</label>
                        <input type="text" id="museum" name="museum" class="w-full p-2 border-2 border-white rounded-lg text-black" placeholder="Museum Name" required>
                    </div>
                    <div class="mb-4">
                        <label for="feedback" class="block text-white text-lg mb-2">Feedback:</label>
                        <textarea id="feedback" name="feedback" rows="4" class="w-full p-2 border-2 border-white rounded-lg text-black" placeholder="Your feedback..." required></textarea>
                    </div>
                    <div class="mb-6">
                        <button type="submit" class="bg-[#6d171f] text-white p-2 rounded-lg hover:bg-[#6d171f]/[0.9]">Submit Feedback</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- <script>
        function downloadReceipt(transactionId) {
            const receiptContent = `
                Transaction ID: ${transactionId}\n
                Date: 2024-09-01\n
                Amount: $100\n
                Status: Completed\n
            `;

            const blob = new Blob([receiptContent], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${transactionId}_receipt.txt`;
            link.click();
        }

        function toggleFavorite(museumName) {
            const button = document.getElementById(`favorite-${museumName.replace(/\s+/g, '')}`);
            if (button.innerText === 'Add to Favorites') {
                button.innerText = 'Remove from Favorites';
                button.classList.add('bg-red-500', 'hover:bg-red-600');
                button.classList.remove('bg-white', 'hover:bg-opacity-50');
                // Save to local storage or send to server
                console.log(`${museumName} added to favorites.`);
            } else {
                button.innerText = 'Add to Favorites';
                button.classList.remove('bg-red-500', 'hover:bg-red-600');
                button.classList.add('bg-white', 'hover:bg-opacity-50');
                // Remove from local storage or send to server
                console.log(`${museumName} removed from favorites.`);
            }
        }

        document.getElementById('feedback-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting normally
            
            const museum = document.getElementById('museum').value;
            const feedback = document.getElementById('feedback').value;

            // Create a new feedback element
            const newFeedback = document.createElement('p');
            newFeedback.innerHTML = `<strong>Feedback for ${museum}:</strong> ${feedback}`;

            // Add the new feedback to the top of the feedback list
            const feedbackList = document.getElementById('feedback-list');
            feedbackList.prepend(newFeedback);

            // Clear the form
            document.getElementById('feedback-form').reset();
        });
    </script> -->
</body>
{% endblock %}
